<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>مطعمي - طلب طعام أونلاين</title>
  <meta name="description" content="تطبيق مطعمي لطلب الطعام عبر الإنترنت مع خدمة التوصيل السريع">
  <link rel="icon" href="assets/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="assets/favicon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --primary: #e74c3c; /* أحمر شهي للطعام */
      --primary-light: rgba(231, 76, 60, 0.1);
      --secondary: #27ae60; /* أخضر طازج */
      --accent: #f39c12; /* برتقالي دافئ */
      --light: #f8f9fa;
      --dark: #1e2a38;
      --gray: #6c757d;
      --light-gray: #e9ecef;
      --bg: #fff9f5; /* خلفية دافئة */
      --card: #fff;
      --radius: 16px;
      --shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      --shadow-hover: 0 12px 40px rgba(0, 0, 0, 0.15);
      --transition: all 0.3s ease;
      --slider-height: 320px;
      font-family: system-ui, "Segoe UI", Roboto, "Noto Naskh Arabic", "Tahoma", sans-serif;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html,body{
      height:100%;
      background:var(--bg);
      color: var(--dark);
      scroll-behavior: smooth;
    }
    .app{
      max-width:1200px;
      margin:0 auto;
      padding:16px;
    }

    /* header - تم التحسين للهواتف */
    header{
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding:16px 0;
      margin-bottom: 10px;
      position: sticky;
      top: 0;
      background: var(--bg);
      z-index: 100;
      border-bottom: 1px solid rgba(0,0,0,0.05);
      transition: var(--transition);
      flex-wrap: wrap;
    }
    header.scrolled {
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      padding: 10px 0;
    }
    .logo{
      display:flex;
      align-items:center;
      gap:12px;
      cursor: pointer;
      flex-shrink: 0;
    }
    .logo img{
      width:48px;
      height:48px;
      border-radius:12px;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }
    .logo:hover img {
      transform: rotate(-5deg);
    }
    .store-name{
      font-weight:800;
      font-size:24px;
      color: var(--primary);
    }
    .search-wrap{
      position: relative;
      width: 420px;
      max-width: 100%;
      flex: 1;
      min-width: 0;
      margin: 0 12px;
    }
    .search-bar {
      display: flex;
      align-items: center;
      background: white;
      border-radius: 30px;
      padding: 8px 16px;
      box-shadow: var(--shadow);
      width: 100%;
      transition: var(--transition);
      border: 1px solid transparent;
    }
    .search-bar:focus-within {
      box-shadow: 0 0 0 3px var(--primary-light);
      border-color: var(--primary);
    }
    .search-bar input {
      border: none;
      outline: none;
      width: 100%;
      padding: 8px;
      font-size: 15px;
      background: transparent;
    }
    .search-bar i {
      color: var(--gray);
    }
    .search-suggestions{
      position: absolute;
      left: 0;
      right: 0;
      top: calc(100% + 8px);
      background: white;
      border-radius: 12px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
      padding: 8px;
      z-index: 500;
      display: none;
      max-height: 320px;
      overflow: auto;
      animation: fadeIn 0.2s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .search-suggestions.show{
      display: block;
    }
    .suggestion-item{
      padding: 10px;
      display:flex;
      gap:10px;
      align-items:center;
      cursor:pointer;
      border-radius: 8px;
      transition: background 0.15s ease;
    }
    .suggestion-item:hover{background: rgba(231,76,60,0.06)}
    .suggestion-thumb{width:40px;height:40px;border-radius:6px;overflow:hidden;background:#f0f3f5;display:flex;align-items:center;justify-content:center}
    .suggestion-meta{flex:1}
    .suggestion-name{font-weight:700}
    .suggestion-price{font-size:13px;color:var(--primary)}

    .cart-icon, .wishlist-icon {
      position: relative;
      cursor: pointer;
      margin-left: 12px;
      transition: var(--transition);
      flex-shrink: 0;
    }
    .cart-icon:hover, .wishlist-icon:hover {
      transform: translateY(-2px);
    }
    .cart-count, .wishlist-count {
      position: absolute;
      top: -8px;
      left: -8px;
      background: var(--accent);
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    .wishlist-count {
      background: var(--secondary);
    }

    /* سلايدر الإعلانات - تم التحسين للهواتف */
    .slider-container {
      margin: 20px 0;
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      height: var(--slider-height);
      background: linear-gradient(180deg, rgba(0,0,0,0.03), rgba(0,0,0,0.01));
      user-select: none;
      touch-action: pan-y;
    }
    .slider {
      display: flex;
      height: 100%;
      transition: transform 0.6s cubic-bezier(.22,.8,.22,1);
      will-change: transform;
    }
    .slide {
      min-width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-shadow: 0 4px 14px rgba(0,0,0,0.6);
      font-size: 28px;
      font-weight: 800;
      position: relative;
      padding: 24px;
      transition: transform 0.6s ease, opacity 0.6s ease;
    }
    .slide::after{ z-index:1; 
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(0deg, rgba(0,0,0,0.25), rgba(0,0,0,0.05));
      pointer-events: none;
    }
    .slide .content{
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 900px;
    }
    .slide small{display:block;font-size:14px;opacity:0.95;margin-bottom:8px}
    .slide h3{font-size:34px;margin-bottom:12px}
    .slide p{font-size:16px;opacity:0.95}

    .slider-controls{
      position: absolute;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content: space-between;
      pointer-events: none;
    }
    .arrow{
      width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.9);box-shadow:0 6px 20px rgba(0,0,0,0.12);margin:16px;cursor:pointer;pointer-events:all;border:none;transition: var(--transition);
    }
    .arrow:hover {
      background: white;
      transform: scale(1.1);
    }
    .arrow i{color:var(--dark)}

    .slider-dots {
      position: absolute;
      bottom: 18px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 3;
    }
    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255,255,255,0.6);
      cursor: pointer;
      transition: var(--transition);
      border: 2px solid rgba(0,0,0,0.06);
    }
    .dot.active {
      background: white;
      transform: scale(1.3);
    }

    /* hero section - تم التحسين للهواتف */
    .hero {
      background: linear-gradient(135deg, var(--primary), #e74c3c);
      color: white;
      border-radius: var(--radius);
      padding: 40px;
      margin: 20px 0;
      text-align: center;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 100%;
      height: 200%;
      background: rgba(255,255,255,0.1);
      transform: rotate(-15deg);
    }
    .hero h1 {
      font-size: 2.2rem;
      margin-bottom: 16px;
      position: relative;
    }
    .hero p {
      font-size: 1.1rem;
      margin-bottom: 24px;
      opacity: 0.9;
      position: relative;
    }
    .hero-buttons {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-top: 24px;
      position: relative;
    }
    .hero-btn {
      padding: 12px 24px;
      border-radius: 30px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }
    .hero-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    .hero-btn:hover::after {
      animation: ripple 1s ease-out;
    }
    @keyframes ripple {
      0% { transform: scale(0, 0); opacity: 1; }
      20% { transform: scale(25, 25); opacity: 1; }
      100% { opacity: 0; transform: scale(40, 40); }
    }
    .hero-btn.primary {
      background: white;
      color: var(--primary);
    }
    .hero-btn.secondary {
      background: rgba(255,255,255,0.2);
      color: white;
      backdrop-filter: blur(10px);
    }
    .hero-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }

    /* categories - تم التحسين للهواتف */
    .section-title {
      font-size: 1.8rem;
      margin: 40px 0 20px;
      color: var(--dark);
      position: relative;
      padding-right: 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .section-title::after {
      content: '';
      position: absolute;
      right: 0;
      bottom: -8px;
      width: 60px;
      height: 4px;
      background: var(--primary);
      border-radius: 2px;
    }
    .view-all {
      font-size: 14px;
      color: var(--primary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .cats-container {
      position: relative;
      margin: 20px 0;
    }
    .cats{
      display:flex;
      gap:16px;
      overflow:auto;
      padding:16px 8px;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .cats::-webkit-scrollbar {display: none}
    .cat{min-width:90px;height:90px;border-radius:var(--radius);background: linear-gradient(145deg, #ffffff, #f5f7f6);display:flex;flex-direction: column;align-items:center;justify-content:center;box-shadow: var(--shadow);flex-shrink:0;transition: var(--transition);cursor: pointer;border: 1px solid rgba(0,0,0,0.03);}
    .cat:hover {transform: translateY(-5px);box-shadow: var(--shadow-hover);} .cat.active {background: linear-gradient(145deg, var(--primary), #e74c3c);color: white;} .cat.active .cat-icon {color: white;} .cat-icon {font-size: 24px;margin-bottom: 8px;color: var(--primary);} .cat small{display:block;font-size:13px;text-align:center;color:inherit;font-weight: 600}

    /* أدوات التصفية والترتيب - تم التحسين للهواتف */
    .filters-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 20px 0;
      flex-wrap: wrap;
      gap: 10px;
      background: white;
      padding: 15px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .sort-filter, .price-filter {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .filter-label {
      font-weight: 600;
      font-size: 14px;
      color: var(--dark);
    }
    .filter-select {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid var(--light-gray);
      background: white;
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition);
    }
    .filter-select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-light);
    }

    /* grid - تم التحسين للهواتف */
    .grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:20px;margin-bottom: 40px}
    .card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);overflow:hidden;transition: var(--transition);position: relative;border: 1px solid rgba(0,0,0,0.03);display: flex;flex-direction: column}
    .card:hover {transform: translateY(-5px);box-shadow: var(--shadow-hover);} 
    .badge {position: absolute;top: 12px;left: 12px;background: var(--accent);color: white;padding: 4px 10px;border-radius: 20px;font-size: 12px;font-weight: bold;z-index: 2}
    .wishlist-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: var(--transition);
      z-index: 2;
      border: none;
    }
    .wishlist-btn:hover, .wishlist-btn.active {
      background: var(--accent);
      color: white;
    }
    .img-wrap{height:180px;background:#f8fafb;border-radius:12px;display:flex;align-items:center;justify-content:center;overflow: hidden;position: relative;margin-bottom: 16px}
    .img-wrap img{max-height:100%;max-width:100%;object-fit:cover;transition: var(--transition);border-radius: 8px;} 
    .card:hover .img-wrap img {transform: scale(1.05)}
    .rating {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 8px;
      color: #ffc107;
      font-size: 14px;
    }
    .rating-count {
      color: var(--gray);
      font-size: 13px;
    }
    .price-container {display: flex;justify-content: space-between;align-items: center;margin-bottom: 16px}
    .price{color:var(--primary);font-weight:800;font-size:20px}
    .old-price {color: var(--gray);text-decoration: line-through;font-size: 14px}
    .card-buttons {display: flex;gap: 8px;margin-top: auto}
    .card-btn{flex: 1;padding:12px;border-radius:10px;border:0;background:var(--primary);color:#fff;font-weight:600;cursor:pointer;transition: var(--transition);display: flex;align-items: center;justify-content: center;gap: 8px}
    .card-btn:hover {opacity: 0.95;transform: translateY(-2px);background: var(--secondary)}
    .card-btn.secondary {background: var(--light);color: var(--dark);flex: 0 0 50px}

    /* سلة التسوق - تم التحسين للهواتف */
    .cart-sidebar {position: fixed;top: 0;left: -400px;width: 380px;height: 100vh;background: white;box-shadow: -5px 0 25px rgba(0,0,0,0.1);z-index: 1000;transition: var(--transition);padding: 20px;overflow-y: auto}
    .cart-sidebar.open {left: 0}
    .cart-header {display: flex;justify-content: space-between;align-items: center;margin-bottom: 20px;padding-bottom: 15px;border-bottom: 1px solid rgba(0,0,0,0.1)}
    .cart-title {font-size: 1.5rem;font-weight: 700}
    .close-cart {background: none;border: none;font-size: 1.5rem;cursor: pointer;color: var(--gray);transition: var(--transition);} 
    .close-cart:hover {color: var(--accent);transform: rotate(90deg);} 
    .cart-items {margin-bottom: 20px}
    .cart-item {display: flex;gap: 12px;padding: 12px 0;border-bottom: 1px solid rgba(0,0,0,0.05);position: relative;}
    .cart-item-img {width: 70px;height: 70px;border-radius: 8px;background: var(--bg);display: flex;align-items: center;justify-content: center;flex-shrink: 0;}
    .cart-item-img img {max-width: 100%;max-height: 100%;object-fit: cover;border-radius: 6px;}
    .cart-item-details {flex: 1}
    .cart-item-name {font-weight: 600;margin-bottom: 5px;font-size: 15px;}
    .cart-item-price {color: var(--primary);font-weight: 700;margin-bottom: 5px;}
    .cart-item-quantity {display: flex;align-items: center;gap: 8px;margin-top: 5px}
    .quantity-btn {width: 28px;height: 28px;border-radius: 50%;border: 1px solid var(--gray);background: white;display: flex;align-items: center;justify-content: center;cursor: pointer;transition: var(--transition);}
    .quantity-btn:hover {background: var(--primary);color: white;border-color: var(--primary);} 
    .quantity-input {width: 40px;text-align: center;border: 1px solid #ddd;border-radius: 4px;padding: 4px}
    .remove-item {color: var(--accent);background: none;border: none;cursor: pointer;font-size: 14px;margin-top: 5px;transition: var(--transition);} 
    .remove-item:hover {color: #e04a4a;}
    .cart-summary {padding: 15px;background: var(--bg);border-radius: var(--radius);margin-top: 20px;position: sticky;bottom: 0;}
    .cart-total {display: flex;justify-content: space-between;font-weight: 700;font-size: 1.2rem;margin-bottom: 15px}
    .checkout-btn {width: 100%;padding: 15px;background: var(--primary);color: white;border: none;border-radius: var(--radius);font-weight: 700;font-size: 1.1rem;cursor: pointer;transition: var(--transition)}
    .checkout-btn:hover {background: var(--secondary);transform: translateY(-2px);} 
    .empty-cart {text-align: center;padding: 30px 0;color: var(--gray)}
    .empty-cart i {font-size: 3rem;margin-bottom: 15px}

    /* لوحة المفضلة - جديدة */
    .wishlist-sidebar {position: fixed;top: 0;left: -400px;width: 380px;height: 100vh;background: white;box-shadow: -5px 0 25px rgba(0,0,0,0.1);z-index: 1000;transition: var(--transition);padding: 20px;overflow-y: auto}
    .wishlist-sidebar.open {left: 0}
    .wishlist-header {display: flex;justify-content: space-between;align-items: center;margin-bottom: 20px;padding-bottom: 15px;border-bottom: 1px solid rgba(0,0,0,0.1)}
    .wishlist-title {font-size: 1.5rem;font-weight: 700}
    .close-wishlist {background: none;border: none;font-size: 1.5rem;cursor: pointer;color: var(--gray);transition: var(--transition);} 
    .close-wishlist:hover {color: var(--accent);transform: rotate(90deg);} 
    .wishlist-items {margin-bottom: 20px}
    .wishlist-item {display: flex;gap: 12px;padding: 12px 0;border-bottom: 1px solid rgba(0,0,0,0.05);position: relative;}
    .wishlist-item-img {width: 70px;height: 70px;border-radius: 8px;background: var(--bg);display: flex;align-items: center;justify-content: center;flex-shrink: 0;}
    .wishlist-item-img img {max-width: 100%;max-height: 100%;object-fit: cover;border-radius: 6px;}
    .wishlist-item-details {flex: 1}
    .wishlist-item-name {font-weight: 600;margin-bottom: 5px;font-size: 15px;}
    .wishlist-item-price {color: var(--primary);font-weight: 700;margin-bottom: 5px;}
    .remove-wishlist-item {color: var(--accent);background: none;border: none;cursor: pointer;font-size: 14px;margin-top: 5px;transition: var(--transition);} 
    .remove-wishlist-item:hover {color: #e04a4a;}
    .wishlist-summary {padding: 15px;background: var(--bg);border-radius: var(--radius);margin-top: 20px;position: sticky;bottom: 0;}
    .wishlist-empty {text-align: center;padding: 30px 0;color: var(--gray)}
    .wishlist-empty i {font-size: 3rem;margin-bottom: 15px}
    .move-to-cart-btn {width: 100%;padding: 15px;background: var(--secondary);color: white;border: none;border-radius: var(--radius);font-weight: 700;font-size: 1.1rem;cursor: pointer;transition: var(--transition)}
    .move-to-cart-btn:hover {background: var(--primary);transform: translateY(-2px);} 

    /* نموذج الطلب - تم التحسين للهواتف */
    .checkout-modal {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.7);display: flex;align-items: center;justify-content: center;z-index: 2000;opacity: 0;visibility: hidden;transition: var(--transition)}
    .checkout-modal.open {opacity: 1;visibility: visible}
    .checkout-modal.open .checkout-form {transform: translateY(0);} 
    .form-title {font-size: 1.5rem;margin-bottom: 20px;text-align: center}
    .form-group {margin-bottom: 15px}
    .form-label {display: block;margin-bottom: 5px;font-weight: 600}
    .form-input {width: 100%;padding: 12px;border: 1px solid #ddd;border-radius: 8px;font-size: 1rem;transition: var(--transition);} 
    .form-input:focus {outline: none;border-color: var(--primary);box-shadow: 0 0 0 3px var(--primary-light);} 
    .form-textarea {min-height: 100px;resize: vertical}
    .form-required::after {content: ' *';color: var(--accent)}
    .form-buttons {display: flex;gap: 12px;margin-top: 20px}
    .form-btn {flex: 1;padding: 12px;border-radius: 8px;border: none;font-weight: 600;cursor: pointer;transition: var(--transition)}
    .form-btn.primary {background: var(--primary);color: white}
    .form-btn.primary:hover {background: #c0392b;}
    .form-btn.secondary {background: var(--light);color: var(--dark)}
    .form-btn.secondary:hover {background: #e9ecef;}

    /* شاشة التحميل والتأكيد - تم التحسين للهواتف */
    .confirmation-overlay {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.7);display: flex;align-items: center;justify-content: center;z-index: 3000;opacity: 0;visibility: hidden;transition: var(--transition)}
    .confirmation-overlay.open {opacity: 1;visibility: visible}

    /* لوحة جميلة داخل شاشة التأكيد */
    .confirmation-panel {background: white;width: 95%;max-width: 820px;border-radius: 14px;padding: 22px;display: flex;gap: 20px;align-items: flex-start;box-shadow: 0 20px 50px rgba(0,0,0,0.35);transform: translateY(20px);transition: var(--transition)}
    .confirmation-overlay.open .confirmation-panel {transform: translateY(0);} 
    .confirmation-panel .loader {width: 60px;height: 60px;border: 5px solid var(--bg);border-top: 5px solid var(--primary);border-radius: 50%;animation: spin 1s linear infinite;margin-right: 10px}
    .confirmation-panel .confirmation-text {font-size: 1.1rem;font-weight: 700;color: var(--dark);margin-bottom: 6px}

    .order-summary {flex: 1;background: linear-gradient(180deg, rgba(231,76,60,0.04), rgba(39,174,96,0.02));padding: 14px;border-radius: 10px}
    .order-summary h3 {margin-bottom: 10px;color: var(--primary)}
    .order-info p {margin-bottom: 6px;font-weight: 600}
    .order-items {margin-top: 10px;max-height: 180px;overflow:auto;padding-right: 8px}
    .order-items .conf-item {display:flex;justify-content: space-between;padding: 8px;background: white;border-radius: 8px;margin-bottom: 8px;box-shadow: var(--shadow)}
    .order-total {margin-top: 10px;font-size: 1.05rem;font-weight: 800;color: var(--dark)}

    .confirmation-panel .countdown {font-size: 2rem;font-weight: 700;color: var(--primary);margin-left: 12px}
    .confirmation-panel .cancel-order-btn {padding: 10px 18px;background: var(--accent);color: white;border: none;border-radius: 8px;font-weight: 600;cursor: pointer;transition: var(--transition)}
    .confirmation-panel .cancel-order-btn:hover {background: #e67e22}

    @keyframes spin {0% { transform: rotate(0deg); }100% { transform: rotate(360deg); }}

    /* سياسة الخصوصية - جديدة */
    .privacy-modal {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.7);display: flex;align-items: center;justify-content: center;z-index: 2000;opacity: 0;visibility: hidden;transition: var(--transition)}
    .privacy-modal.open {opacity: 1;visibility: visible}
    .privacy-modal.open .privacy-content {transform: translateY(0);} 
    .privacy-content {background: white;width: 90%;max-width: 700px;max-height: 80vh;border-radius: 14px;padding: 30px;box-shadow: 0 20px 50px rgba(0,0,0,0.35);transform: translateY(20px);transition: var(--transition);overflow-y: auto}
    .privacy-header {display: flex;justify-content: space-between;align-items: center;margin-bottom: 20px;padding-bottom: 15px;border-bottom: 1px solid rgba(0,0,0,0.1)}
    .privacy-title {font-size: 1.5rem;font-weight: 700}
    .close-privacy {background: none;border: none;font-size: 1.5rem;cursor: pointer;color: var(--gray);transition: var(--transition);} 
    .close-privacy:hover {color: var(--accent);transform: rotate(90deg);} 
    .privacy-text {line-height: 1.8;color: var(--dark)}
    .privacy-text h3 {margin: 20px 0 10px;color: var(--primary)}
    .privacy-text p {margin-bottom: 15px}

    /* فوتر - تم التحسين للهواتف */
    .footer {background: var(--dark);color: white;padding: 60px 0 30px;margin-top: 60px;border-radius: var(--radius) var(--radius) 0 0}
    .footer-content {max-width: 1200px;margin: 0 auto;padding: 0 20px;display: grid;grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));gap: 30px}
    .footer-section h4 {font-size: 18px;margin-bottom: 20px;position: relative;padding-bottom: 10px}
    .footer-section h4::after {content: '';position: absolute;bottom: 0;right: 0;width: 50px;height: 2px;background: var(--secondary)}
    .footer-contact p {display: flex;align-items: center;gap: 10px;margin-bottom: 12px}
    .footer-social {display: flex;gap: 15px;margin-top: 20px}
    .footer-social a {display: flex;align-items: center;justify-content: center;width: 40px;height: 40px;border-radius: 50%;background: rgba(255,255,255,0.1);color: white;transition: var(--transition)}
    .footer-social a:hover {background: var(--primary);transform: translateY(-3px)}
    .copyright {text-align: center;margin-top: 40px;padding-top: 20px;border-top: 1px solid rgba(255,255,255,0.1);color: rgba(255,255,255,0.7);font-size: 14px}
    .privacy-link {color: rgba(255,255,255,0.7);text-decoration: none;transition: var(--transition);margin-top: 10px;display: inline-block;border-bottom: 1px dotted rgba(255,255,255,0.3);padding-bottom: 2px}
    .privacy-link:hover {color: white;border-bottom-color: white}

    /* شريط التحميل */
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: var(--primary);
      width: 0%;
      z-index: 9999;
      transition: width 0.4s ease;
    }

    /* زر العودة للأعلى */
    .back-to-top {
      position: fixed;
      bottom: 30px;
      left: 30px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: var(--transition);
      opacity: 0;
      visibility: hidden;
      z-index: 99;
    }
    .back-to-top.show {
      opacity: 1;
      visibility: visible;
    }
    .back-to-top:hover {
      background: var(--secondary);
      transform: translateY(-5px);
    }

    /* تأثيرات إضافية */
    .notification {position: fixed;top: 20px;right: 20px;background: var(--secondary);color: white;padding: 16px 24px;border-radius: var(--radius);box-shadow: var(--shadow);z-index: 3000;display: flex;align-items: center;gap: 10px;transform: translateY(-100px);opacity: 0;transition: var(--transition)}
    .notification.show {transform: translateY(0);opacity: 1}

    .store-name {background: linear-gradient(135deg, var(--primary), var(--secondary));background-clip: text;-webkit-background-clip: text;-webkit-text-fill-color: transparent}
    .title {display: -webkit-box;-webkit-box-orient: vertical;overflow: hidden;text-overflow: ellipsis}

    .overlay {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.5);z-index: 999;display: none;transition: var(--transition);}
    .overlay.open {display: block}

    /* تأثيرات للظهور بالتتابع */
    .fade-in {
      animation: fadeInUp 0.6s ease forwards;
      opacity: 0;
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Mobile Menu Button (إضافة جديدة) */
    .menu-toggle {
      display: none;
      flex-direction: column;
      justify-content: space-around;
      width: 30px;
      height: 30px;
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0;
      z-index: 10;
    }
    .menu-toggle span {
      width: 30px;
      height: 3px;
      background: var(--dark);
      border-radius: 5px;
      transition: all 0.3s linear;
      position: relative;
      transform-origin: center;
    }

    /* Mobile Navigation (إضافة جديدة) */
    .mobile-nav {
      position: fixed;
      top: 0;
      right: -100%;
      width: 80%;
      height: 100vh;
      background: white;
      z-index: 1000;
      transition: var(--transition);
      padding: 80px 20px 20px;
      box-shadow: -5px 0 15px rgba(0,0,0,0.1);
      overflow-y: auto;
    }
    .mobile-nav.open {
      right: 0;
    }
    .mobile-nav .nav-item {
      display: block;
      padding: 15px 0;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      font-weight: 600;
      color: var(--dark);
      text-decoration: none;
    }
    .close-mobile-nav {
      position: absolute;
      top: 20px;
      left: 20px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }

    /* ========== وسائط متعددة محسنة للهواتف ========== */
    @media (max-width: 1024px) {
      .search-wrap {
        width: 320px;
      }
      .slide h3 {
        font-size: 28px;
      }
    }

    @media (max-width: 900px) {
      .search-wrap {
        width: 280px;
      }
    }

    @media (max-width: 768px) {
      header {
        flex-wrap: wrap;
        gap: 16px;
        padding: 16px 0;
      }
      .search-wrap {
        order: 3;
        width: 100%;
        max-width: none;
        margin: 0;
      }
      .logo {
        flex: 1;
      }
      .header-icons {
        display: flex;
        gap: 12px;
      }
      .hero {
        padding: 30px 20px;
      }
      .hero h1 {
        font-size: 1.8rem;
      }
      .hero-buttons {
        flex-direction: column;
      }
      .grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
      .cart-sidebar, .wishlist-sidebar {
        width: 100%;
        left: -100%;
      }
      .footer-content {
        grid-template-columns: 1fr;
        text-align: center;
      }
      .footer-contact p {
        justify-content: center;
      }
      .footer-social {
        justify-content: center;
      }
      .slider-container {
        height: 220px;
      }
      .filters-bar {
        flex-direction: column;
        align-items: flex-start;
      }
      .back-to-top {
        bottom: 20px;
        left: 20px;
        width: 40px;
        height: 40px;
      }
      .confirmation-panel {
        flex-direction: column;
        align-items: center;
      }
      .confirmation-panel .countdown {
        margin-left: 0;
        margin-top: 8px;
      }
      /* إخفاء زر القائمة في الهاتف */
      .menu-toggle {
        display: none;
      }
      /* إخفاء بعض العناصر في الهاتف */
      .wishlist-icon span, .cart-icon span {
        display: none;
      }
    }

    @media (max-width: 640px) {
      .header-icons {
        gap: 8px;
      }
      .cart-icon, .wishlist-icon {
        margin-left: 8px;
      }
      .slide .content {
        padding: 0 15px;
      }
      .slide h3 {
        font-size: 24px;
      }
      .slide p {
        font-size: 14px;
      }
      .hero h1 {
        font-size: 1.6rem;
      }
      .hero p {
        font-size: 1rem;
      }
      .section-title {
        font-size: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .app {
        padding: 12px;
      }
      .grid {
        grid-template-columns: 1fr;
      }
      .cat {
        min-width: 80px;
        height: 80px;
      }
      .cat-icon {
        font-size: 20px;
      }
      .cat small {
        font-size: 12px;
      }
      .hero h1 {
        font-size: 1.5rem;
      }
      .checkout-form, .privacy-content {
        width: 95%;
        padding: 15px;
      }
      .search-wrap {
        max-width: 100%;
      }
      .slide h3 {
        font-size: 20px;
      }
      .slide p {
        font-size: 13px;
      }
      .arrow {
        width: 40px;
        height: 40px;
        margin: 8px;
      }
      .slider-dots {
        bottom: 12px;
      }
      .dot {
        width: 10px;
        height: 10px;
      }
      .card-buttons {
        flex-direction: column;
      }
      .card-btn {
        width: 100%;
      }
      .filters-bar {
        padding: 12px;
      }
      .filter-select {
        padding: 6px 10px;
        font-size: 13px;
      }
      .filter-label {
        font-size: 13px;
      }
    }

    @media (max-width: 360px) {
      .store-name {
        font-size: 20px;
      }
      .logo img {
        width: 40px;
        height: 40px;
      }
      .hero {
        padding: 20px 15px;
      }
      .hero h1 {
        font-size: 1.3rem;
      }
      .hero-btn {
        padding: 10px 16px;
        font-size: 14px;
      }
      .section-title {
        font-size: 1.3rem;
      }
      .cat {
        min-width: 70px;
        height: 70px;
      }
    }
  
/* ===== تحسين مظهر نموذج إتمام الطلب: عريض وفخم وحواف دائرية ===== */
.checkout-modal {
  align-items: center;
  padding: 32px;
}
.checkout-modal .checkout-form,
.checkout-form {
  background: linear-gradient(180deg, #ffffff 0%, #fffefc 100%) !important;
  width: min(92%, 920px) !important;
  max-width: 920px !important;
  border-radius: 28px !important; /* حواف شبه دائرية */
  padding: 28px 30px !important;
  box-shadow: 0 30px 80px rgba(14,21,47,0.32) !important; /* ظل فخم */
  border: 1px solid rgba(0,0,0,0.06) !important;
  transform: translateY(0) !important;
  transition: transform 0.45s cubic-bezier(.22,.8,.22,1), box-shadow 0.3s ease !important;
  backdrop-filter: blur(6px);
}

/* عنوان النموذج بشكل مُزين (pill) */
.checkout-form .form-title {
  display: inline-block;
  padding: 10px 16px;
  border-radius: 18px;
  font-size: 1.25rem;
  background: linear-gradient(90deg, rgba(231,76,60,0.06), rgba(39,174,96,0.04));
  color: var(--dark);
  margin-bottom: 18px;
  font-weight: 800;
}

/* تحسين الحقول والأزرار داخل النموذج */
.checkout-form .form-input {
  padding: 14px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.06);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.5);
}
.checkout-form .form-textarea { min-height: 120px; border-radius: 12px; }
.checkout-form .form-buttons { gap: 14px; margin-top: 22px; }
.checkout-form .form-btn.primary {
  padding: 14px 18px;
  border-radius: 14px;
  font-size: 1rem;
  box-shadow: 0 12px 30px rgba(231,76,60,0.12);
}

/* Responsive: على الشاشات الصغيرة اجعلها تقريبًا كامل العرض مع نفس الحواف */
@media (max-width: 640px) {
  .checkout-modal .checkout-form,
  .checkout-form {
    width: 96% !important;
    padding: 18px !important;
    border-radius: 18px !important;
  }
  .checkout-form .form-title { font-size: 1.1rem; padding: 8px 12px; }
}

/* === Fix for slider white-background issue: use real <img> inside slides === */
.slide { background-color: #f6f6f6; position: relative; overflow: hidden; }
.slide-img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; display: block; }
.slide .content { position: relative; z-index: 2; }

/* === Product modal & rating stars UI === */
.product-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 4000; opacity: 0; visibility: hidden; transition: 0.22s ease; }
.product-modal.open { opacity: 1; visibility: visible; }
.product-panel { width: min(980px, 96%); max-width: 980px; background: white; border-radius: 16px; padding: 18px; display: flex; gap: 18px; box-shadow: 0 30px 70px rgba(0,0,0,0.2); align-items: flex-start; }
.product-gallery { flex: 1 1 45%; min-width: 220px; display:flex;align-items:center;justify-content:center; background: #fafafa; border-radius: 10px; overflow: hidden; }
.product-gallery img { width:100%; height:100%; object-fit: cover; }
.product-info { flex: 1 1 55%; min-width:220px; display:flex;flex-direction:column; gap:10px; }
.close-product { position: absolute; right: 18px; top: 12px; border: none; background: none; font-size: 20px; cursor: pointer; color: #666; }
.product-info h3 { margin:0 0 6px 0; font-size: 1.3rem; }
.product-info p { margin: 0; color: #444; line-height: 1.45; }
.product-price { font-weight: 800; color: var(--primary); font-size: 1.2rem; }

/* Stars */
.stars { display:flex; gap:6px; align-items:center; }
.stars i { cursor: pointer; font-size: 20px; transition: transform 0.12s ease; }
.stars i:hover { transform: scale(1.12); }

/* Review textarea */
#pmReviewText { min-height: 90px; resize: vertical; }

/* Small screens */
@media (max-width: 720px) {
  .product-panel { flex-direction: column; padding: 12px; }
  .product-gallery, .product-info { width: 100%; min-width: 0; }
  .product-info { padding-bottom: 8px; }
}

/* ====== Header Responsive Fix ====== */
header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;          /* يخلي العناصر تنزل تحت إذا الشاشة ضيقة */
  padding: 10px 16px;
  box-sizing: border-box;
  width: 100%;
}

.logo {
  max-width: 150px;         /* يحدد حجم أقصى للوجو */
  height: auto;
  flex: 0 0 auto;
}

.search-wrap {
  flex: 1 1 300px;          /* يتمدد بس يخلي حد أدنى */
  display: flex;
  justify-content: center;
  max-width: 100%;
}

.search-bar {
  width: 100%;
  max-width: 400px;         /* عشان ما تكبر زيادة */
}

/* ====== Slider Fix ====== */
.slider {
  position: relative;
  overflow: hidden;
  width: 100%;
}

.slider img {
  width: 100%;              /* يخلي الصورة تغطي كامل العرض */
  height: auto;             /* يحافظ على التناسب */
  display: block;
  object-fit: cover;        /* يمنع التشويه */
}


</style>

<!-- Assistant slider CSS (ensures slides display correctly and cover container) -->
<style>
.slider-container { position: relative; overflow: hidden; width: 100%; }
.slider { display: flex; transition: transform 0.6s cubic-bezier(.22,.8,.22,1); will-change: transform; height: 100%; min-height: 260px; }
.slide { flex: 0 0 100%; position: relative; height: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden; }
.slide-img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; display: block; z-index: 0; }
.slide .content { position: absolute; z-index: 2; left: 0; right: 0; top: 50%; transform: translateY(-50%); text-align: center; max-width: 900px; margin: 0 auto; padding: 16px; color: white; text-shadow: 0 4px 12px rgba(0,0,0,0.6); }
.slider-controls { position: absolute; inset: 0; display:flex; align-items:center; justify-content: space-between; pointer-events: none; }
.arrow { pointer-events: all; }
.slider-dots { position: absolute; bottom: 18px; width: 100%; display:flex; justify-content:center; gap:8px; z-index: 3; }
.dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255,255,255,0.6); cursor: pointer; border: 2px solid rgba(0,0,0,0.06); }
.dot.active { background: white; transform: scale(1.3); }
</style>
<!-- end assistant slider CSS -->

</head>
<body>
  <div class="progress-bar" id="progressBar"></div>
  <div class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
  </div>

  <div class="app">
    <header id="mainHeader">
      <div class="logo" onclick="scrollToTop()">
        <img src="https://media.discordapp.net/attachments/1410018130474045490/1417964990547365898/Lovepik_com-450160567-Restaurant_Logo_design._Food_vector_logo_design.png?ex=68cc664e&is=68cb14ce&hm=8601a99652e5f36100ccbb14ed96566168f50a29d204bf8bb83da6ab01891917&=&format=webp&quality=lossless&width=968&height=968" alt="logo" width="48" height="48" style="border-radius:12px;box-shadow:var(--shadow)">
        <div class="store-name">مطعمي</div>
      </div>

      <div class="search-wrap">
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="ابحث عن وجبة أو طبق..." id="searchInput" autocomplete="off">
        </div>
        <div class="search-suggestions" id="searchSuggestions"></div>
      </div>

      <div class="header-icons" style="display:flex;align-items:center;gap:8px">
        <div class="wishlist-icon" id="wishlistIcon" aria-label="المفضلة">
          <i class="fas fa-heart" style="font-size: 24px;"></i>
          <div class="wishlist-count" id="wishlistCount">0</div>
        </div>
        <div class="cart-icon" id="cartIcon" aria-label="سلة التسوق">
          <i class="fas fa-shopping-cart" style="font-size: 24px;"></i>
          <div class="cart-count" id="cartCount">0</div>
        </div>
      </div>
    </header>

    <!-- سلايدر الإعلانات -->

<!-- سلايدر الإعلانات (محدَّث بواسطة المساعد) -->
<div class="slider-container" id="sliderContainer">
  <div class="slider" id="slider">
    <div class="slide">
      <img class="slide-img" src="https://i.pinimg.com/736x/d0/07/0a/d0070af7b77ddd7ffef1b07e7e6ce86e.jpg" alt="عرض 1">
      <div class="content">
        <small>عروض حصرية</small>
        <h3>خصم 20% على جميع الوجبات</h3>
        <p>استمتع بأشهى المأكولات مع خصم خاص لمدة محدودة.</p>
      </div>
    </div>

    <div class="slide">
      <img class="slide-img" src="https://images.ctfassets.net/rric2f17v78a/5f9PRsY8hUdM36dWP8uR2t/74d20136a1ccbc3dae709ac60f2507ae/01_oodles-noodle-bar.png" alt="عرض 2">
      <div class="content">
        <small>وجبات سريعة</small>
        <h3>برجر لحم مشوي</h3>
        <p>برجر لحم طازج مع خضروات وصوص خاص. طلبك يصل خلال 30 دقيقة.</p>
      </div>
    </div>

    <div class="slide">
      <img class="slide-img" src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" alt="عرض 3">
      <div class="content">
        <small>بيتزا إيطالية</small>
        <h3>عرض لمدة 3 أيام فقط</h3>
        <p>بيتزا كبيرة بثمن وسط. سارع بالطلب والكمية محدودة.</p>
      </div>
    </div>
  </div>

  <div class="slider-controls">
    <button class="arrow" id="prevBtn" aria-label="السابق"><i class="fas fa-chevron-right"></i></button>
    <button class="arrow" id="nextBtn" aria-label="التالي"><i class="fas fa-chevron-left"></i></button>
  </div>

  <div class="slider-dots" id="sliderDots" aria-hidden="false"></div>
</div>
<!-- نهاية السلايدر المحدّث -->


    <!-- hero section -->
    <section class="hero">
      <h1>مطعمي - أشهى المأكولات إلى باب منزلك</h1>
      <p>اطلب وجبتك المفضلة واحصل عليها بسرعة وسهولة مع خدمة التوصيل السريع</p>
      <div class="hero-buttons">
        <button class="hero-btn primary" onclick="scrollToProducts()">
          <i class="fas fa-utensils"></i> تصفح القائمة
        </button>
        <button class="hero-btn secondary" onclick="openWhatsApp('أهلاً، أريد الاستفسار عن القائمة المتوفرة')">
          <i class="fab fa-whatsapp"></i> تواصل معنا
        </button>
      </div>
    </section>

    <!-- categories -->
    <h2 class="section-title">الأقسام <a href="#" class="view-all">عرض الكل <i class="fas fa-arrow-left"></i></a></h2>
    <div class="cats-container">
      <div class="cats" id="categories"></div>
    </div>

    <!-- أدوات التصفية والترتيب -->
    <div class="filters-bar">
      <div class="sort-filter">
        <span class="filter-label">ترتيب حسب:</span>
        <select class="filter-select" id="sortSelect" onchange="applySorting()">
          <option value="default">الإفتراضي</option>
          <option value="price-asc">السعر: من الأقل للأعلى</option>
          <option value="price-desc">السعر: من الأعلى للأقل</option>
          <option value="name">الاسم</option>
          <option value="popular">الأكثر شيوعاً</option>
        </select>
      </div>
      <div class="price-filter">
        <span class="filter-label">تصفية:</span>
        <select class="filter-select" id="filterSelect" onchange="applyFilters()">
          <option value="all">جميع المنتجات</option>
          <option value="discount">العروض والخصومات</option>
          <option value="new">المنتجات الجديدة</option>
          <option value="bestseller">الأكثر مبيعاً</option>
        </select>
      </div>
    </div>

    <!-- products grid -->
    <h2 class="section-title" id="productsSection">قائمة الطعام</h2>
    <div class="grid" id="products"></div>

    <!-- سلة التسوق -->
    <div class="cart-sidebar" id="cartSidebar">
      <div class="cart-header">
        <h2 class="cart-title">سلة التسوق</h2>
        <button class="close-cart" id="closeCart"><i class="fas fa-times"></i></button>
      </div>
      <div class="cart-items" id="cartItems"></div>
      <div class="cart-summary">
        <div class="cart-total">
          <span>المجموع:</span>
          <span id="cartTotal">0.00 دينار</span>
        </div>
        <button class="checkout-btn" id="checkoutBtn">متابعة الطلب</button>
      </div>
    </div>

    <!-- لوحة المفضلة - جديدة -->
    <div class="wishlist-sidebar" id="wishlistSidebar">
      <div class="wishlist-header">
        <h2 class="wishlist-title">قائمة المفضلة</h2>
        <button class="close-wishlist" id="closeWishlist"><i class="fas fa-times"></i></button>
      </div>
      <div class="wishlist-items" id="wishlistItems"></div>
      <div class="wishlist-summary">
        <button class="move-to-cart-btn" id="moveAllToCartBtn">نقل الكل إلى السلة</button>
      </div>
    </div>

    
<!-- نموذج عرض منتج وتقييم -->
<div class="product-modal" id="productModal" aria-hidden="true">
  <div class="product-panel" role="dialog" aria-modal="true" aria-labelledby="pmName">
    <button class="close-product" id="closeProductModal" aria-label="إغلاق"><i class="fas fa-times"></i></button>
    <div class="product-gallery">
      <img id="pmImg" src="https://via.placeholder.com/600x400" alt="صورة المنتج">
    </div>
    <div class="product-info">
      <h3 id="pmName">اسم المنتج</h3>
      <div class="product-price" id="pmPrice">0.00</div>
      <p id="pmDesc">وصف المنتج سيظهر هنا.</p>
      <div style="display:flex;align-items:center;gap:12px;">
        <div id="pmRating" class="rating" aria-hidden="true"></div>
        <div style="color:var(--gray);font-size:13px" id="pmReviewsCount">(0 تقييم)</div>
      </div>

      <hr style="border:none;border-top:1px solid #eee;margin:8px 0">

      <label style="font-weight:700">اكتب تقييمك</label>
      <div class="stars" id="starContainer" role="radiogroup" aria-label="تقييم بنجمة"></div>
      <textarea id="pmReviewText" class="form-input" placeholder="اكتب تعليقك هنا (اختياري)"></textarea>
      <label style="font-size:13px"><input type="checkbox" id="delayReview"> أرسل التقييم بعد يومين</label>

      <div style="display:flex;gap:10px;margin-top:10px">
        <button class="form-btn primary" id="submitReviewBtn">إرسال التقييم</button>
        <button class="form-btn secondary" id="closeReviewBtn">إغلاق</button>
      </div>
    </div>
  </div>
</div>
<!-- نهاية نموذج عرض المنتج -->

<!-- نموذج الطلب -->
    <div class="checkout-modal" id="checkoutModal">
      <div class="checkout-form">
        <h2 class="form-title">إتمام الطلب</h2>
        <form id="orderForm">
          <div class="form-group">
            <label class="form-label form-required">الاسم الكامل</label>
            <input type="text" class="form-input" name="name" required>
          </div>
          <div class="form-group">
            <label class="form-label form-required">رقم الهاتف</label>
            <input type="tel" class="form-input" name="phone" required>
          </div>
          <div class="form-group">
            <label class="form-label form-required">المحافظة</label>
            <select class="form-input" name="governorate" required>
              <option value="">اختر المحافظة</option>
              <option value="بغداد">بغداد</option>
              <option value="البصرة">البصرة</option>
              <option value="نينوى">نينوى</option>
              <option value="أربيل">أربيل</option>
              <option value="النجف">النجف</option>
              <option value="كربلاء">كربلاء</option>
              <option value="الأنبار">الأنبار</option>
              <option value="ذي قار">ذي قار</option>
              <option value="بابل">بابل</option>
              <option value="واسط">واسط</option>
              <option value="صلاح الدين">صلاح الدين</option>
              <option value="ديالى">ديالى</option>
              <option value="دهوك">دهوك</option>
              <option value="ميسان">ميسان</option>
              <option value="المثنى">المثنى</option>
              <option value="القادسية">القادسية</option>
              <option value="السليمانية">السليمانية</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label form-required">العنوان</label>
            <input type="text" class="form-input" name="address" required>
          </div>
          <div class="form-group">
            <label class="form-label">اسم الشارع</label>
            <input type="text" class="form-input" name="street">
          </div>
          <div class="form-group">
            <label class="form-label">ملاحظات</label>
            <textarea class="form-input form-textarea" name="notes" placeholder="ملاحظات حول الطلب أو التعليمات الخاصة بالتوصيل"></textarea>
          </div>
          <div class="form-buttons">
            <button type="button" class="form-btn secondary" id="cancelOrderBtn">إلغاء</button>
            <button type="submit" class="form-btn primary">إكمال الطلب</button>
          </div>
        </form>
      </div>
    </div>

    <!-- سياسة الخصوصية - جديدة -->
    <div class="privacy-modal" id="privacyModal">
      <div class="privacy-content">
        <div class="privacy-header">
          <h2 class="privacy-title">سياسة الخصوصية</h2>
          <button class="close-privacy" id="closePrivacy"><i class="fas fa-times"></i></button>
        </div>
        <div class="privacy-text">
          <h3>مقدمة</h3>
          <p>نحن في مطعمي نحترم خصوصيتك ونلتزم بحماية بياناتك الشخصية. توضح سياسة الخصوصية هذه كيفية جمع واستخدام ومشاركة معلوماتك الشخصية.</p>
          
          <h3>المعلومات التي نجمعها</h3>
          <p>نجمع المعلومات التي تقدمها لنا مباشرة مثل اسمك ورقم هاتفك وعنوانك عندما تقوم بإنشاء حساب أو إجراء عملية شراء.</p>
          
          <h3>كيف نستخدم معلوماتك</h3>
          <p>نستخدم معلوماتك لتقديم الخدمات التي تطلبها، ومعالجة المدفوعات، وإرسال التحديثات المتعلقة بطلباتك، وتحسين خدماتنا.</p>
          
          <h3>مشاركة المعلومات</h3>
          <p>لا نبيع أو نؤجر معلوماتك الشخصية إلى أطراف ثالثة. قد نشارك معلوماتك مع مقدمي الخدمات الذين يعملون نيابة عننا.</p>
          
          <h3>الأمان</h3>
          <p>نحن نحمي معلوماتك باستخدام إجراءات أمنية تقنية وإدارية لمنع فقدان أو سرقة أو إساءة استخدام معلوماتك.</p>
          
          <h3>التغييرات على السياسة</h3>
          <p>قد نقوم بتحديث سياسة الخصوصية هذه من وقت لآخر. سنخطرك بأي تغييرات من خلال نشر السياسة الجديدة على موقعنا.</p>
          
          <p>لأية استفسارات حول سياسة الخصوصية، يرجى الاتصال بنا على: info@mat3amy.com</p>
        </div>
      </div>
    </div>

    <!-- شاشة التحميل والتأكيد (محدثة لعرض لوحة معلومات العميل والطلب أثناء العد التنازلي) -->
    <div class="confirmation-overlay" id="confirmationOverlay">
      <div class="confirmation-panel">
        <div>
          <div class="loader"></div>
        </div>
        <div style="flex:1;min-width:0;">
          <div class="confirmation-text">جاري معالجة طلبك، الرجاء الانتظار...</div>

          <div class="order-summary" aria-live="polite">
            <h3>تفاصيل الطلب</h3>
            <div class="order-info">
              <p><strong>الاسم:</strong> <span id="confName">-</span></p>
              <p><strong>الهاتف:</strong> <span id="confPhone">-</span></p>
              <p><strong>المحافظة:</strong> <span id="confGovernorate">-</span></p>
              <p><strong>العنوان:</strong> <span id="confAddress">-</span></p>
            </div>

            <div class="order-items" id="confItems">
              <!-- عناصر الطلب ستعرض هنا -->
            </div>

            <div class="order-total"><strong>المجموع:</strong> <span id="confTotal">0.00 دينار</span></div>
          </div>
        </div>

        <div style="display:flex;flex-direction:column;align-items:center;gap:8px">
          <div class="countdown" id="countdown">20</div>
          <button class="cancel-order-btn" id="cancelOrderFinalBtn">إلغاء الطلب</button>
        </div>

      </div>
    </div>

    <!-- overlay للخلفية -->
    <div class="overlay" id="overlay"></div>

    <!-- فوتر -->
    <div class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <h4>عن مطعمي</h4>
          <p>مطعمي يوفر لك أشهى المأكولات والمشروبات بأفضل الأسعار مع خدمة التوصيل السريع إلى باب منزلك.</p>
        </div>
        <div class="footer-section">
          <h4>وسائل التواصل</h4>
          <div class="footer-contact">
            <p><i class="fas fa-phone"></i> 07701234567</p>
            <p><i class="fas fa-envelope"></i> info@mat3amy.com</p>
            <p><i class="fas fa-map-marker-alt"></i> بغداد، المنصور</p>
          </div>
        </div>
        <div class="footer-section">
          <h4>تابعنا على</h4>
          <div class="footer-social">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#" onclick="openWhatsApp('أهلاً، أريد الاستفسار عن القائمة المتوفرة')"><i class="fab fa-whatsapp"></i></a>
          </div>
        </div>
      </div>
      <div class="copyright">
        © 2025 مطعمي. تم تطويره في شركة High Tech Studio.
        <br>
        <a href="#" class="privacy-link" id="privacyLink">سياسة الخصوصية</a>
      </div>
    </div>
  </div>

  <!-- notification -->
  <div class="notification" id="notification">
    <i class="fas fa-check-circle"></i>
    <span id="notificationText">جاري فتح واتساب</span>
  </div>

  <script>
    /******************** إعدادات مهمة (غيّرها حسب المطعم) ********************/
    const restaurantPhone = '9647701234567';
    const currency = 'دينار';
    const discordWebhookURL = 'https://discord.com/api/webhooks/1415123197279473805/oCA4-l_8lXlcAcLfUY_sz-gst_p6Six1CRGkPmIDAJpa3h9yxOk6H0OcJrGlI6hIkKqP'; // استبدل برابط الويب هوك الخاص بك

    const productsData = [
      {id:1,name:'برجر لحم مشوي',price:8.50,image:'https://images.unsplash.com/photo-1553979459-d2229ba7433b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'الوجبات الرئيسية', badge: 'الأكثر مبيعاً', rating: 4.8, reviews: 124, sales: 450, description: 'برجر لحم طازج مع خضروات وصوص خاص'},
      {id:2,name:'بيتزا بيبروني',price:12.00,image:'https://images.unsplash.com/photo-1513104890138-7c749659a591?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'البيتzza', oldPrice: 15.00, rating: 4.7, reviews: 89, sales: 320, description: 'بيتزا بالبيبروني والجبنة الموزاريلا'},
      {id:3,name:'سلطة سيزر',price:6.50,image:'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المقبلات', rating: 4.5, reviews: 67, sales: 210, description: 'سلطة طازجة مع صوص سيزر الخاص'},
      {id:4,name:'سوشي متنوع',price:15.00,image:'https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المأكولات البحرية', badge: 'جديد', rating: 4.9, reviews: 156, sales: 380, description: 'تشكيلة متنوعة من السوشي الطازج'},
      {id:5,name:'معكرونة البولونيز',price:9.00,image:'https://images.unsplash.com/photo-1621996346565-e3dbc353d2e5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المعكرونة', rating: 4.6, reviews: 203, sales: 510, description: 'معكرونة مع صلصة البولونيز الإيطالية'},
      {id:6,name:'دجاج مشوي',price:10.75,image:'https://images.unsplash.com/photo-1604503468505-2a9c24639b35?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'الوجبات الرئيسية', rating: 4.4, reviews: 45, sales: 120, description: 'دجاج مشوي مع أعشاب وبهارات'},
      {id:7,name:'شاورما لحم',price:7.20,image:'https://images.unsplash.com/photo-1643075252158-e4c98e70b660?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'سندويشات', rating: 4.3, reviews: 32, sales: 95, description: 'شاورما لحم مع خضروات وصوص الثوم'},
      {id:8,name:'كبة مقلية',price:6.30,image:'https://images.unsplash.com/photo-1598214886806-c87b84b7078b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المقبلات', rating: 4.7, reviews: 78, sales: 180, description: 'كبة مقلية مقرمشة مع لحم وصوص اللبن'},
      {id:9,name:'مشروبات غازية',price:1.50,image:'https://images.unsplash.com/photo-1622483767028-3f66f32aef97?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المشروبات', rating: 4.1, reviews: 56, sales: 140, description: 'مشروبات غازية متنوعة'},
      {id:10,name:'عصير برتقال طازج',price:3.50,image:'https://images.unsplash.com/photo-1613478223719-2ab802602423?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المشروبات', rating: 4.9, reviews: 210, sales: 650, description: 'عصير برتقال طازج مع قطع البرتقال'},
      {id:11,name:'تشيز كيك',price:5.00,image:'https://images.unsplash.com/photo-1524351199678-941a58a3df50?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'الحلويات', rating: 4.8, reviews: 142, sales: 420, description: 'تشيز كيك كريمي مع طبقة من التوت'},
      {id:12,name:'آيس كريم شوكولاتة',price:4.00,image:'https://images.unsplash.com/photo-1566566220367-af8d77269164?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'الحلويات', oldPrice: 5.00, rating: 4.6, reviews: 189, sales: 580, description: 'آيس كريم شوكولاتة غني بالقشطة'},
      {id:13,name:'قهوة عربية',price:2.00,image:'https://images.unsplash.com/photo-1559056199-641a0ac8b55e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المشروبات', rating: 4.7, reviews: 97, sales: 230, description: 'قهوة عربية أصيلة مع هيل'},
      {id:14,name:'شاي بالنعناع',price:2.00,image:'https://images.unsplash.com/photo-1597318181409-c913ec151275?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المشروبات', rating: 4.5, reviews: 167, sales: 390, description: 'شاي أخضر مع نعناع طازج'},
      {id:15,name:'كباب حلة',price:11.30,image:'https://images.unsplash.com/photo-1589302168068-964664d93dc0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'الوجبات الرئيسية', rating: 4.8, reviews: 64, sales: 310, description: 'كباب حلة مع أرص وصوص الطماطم'},
      {id:16,name:'سمك مشوي',price:14.00,image:'https://images.unsplash.com/photo-1599707367072-cd6ada2bc375?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المأكولات البحرية', badge: 'عرض', rating: 4.6, reviews: 43, sales: 85, description: 'سمك مشوي مع أرز وصوص الليمون'},
      {id:17,name:'سلطة يونانية',price:5.80,image:'https://images.unsplash.com/photo-1540420773420-3366772f4999?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المقبلات', rating: 4.4, reviews: 132, sales: 470, description: 'سلطة يونانية مع جبنة الفيتا والزيتون'},
      {id:18,name:'مقبلات متنوعة',price:8.50,image:'https://images.unsplash.com/photo-1505253716362-afaea1d3d1af?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'المقبلات', rating: 4.3, reviews: 76, sales: 190, description: 'تشكيلة مقبلات متنوعة'},
      {id:19,name:'مشاوي مشكلة',price:16.50,image:'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'الوجبات الرئيسية', rating: 4.7, reviews: 98, sales: 240, description: 'مشاوي مشكلة مع أرز وخضار'},
      {id:20,name:'بيتزا نابولي',price:11.20,image:'https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',category: 'البيتزا', rating: 4.5, reviews: 54, sales: 170, description: 'بيتزا نابولي مع جبنة موزاريلا وطماطم'}
    ];

    /******************** نهاية الإعدادات *************************/

    const categories = [
      {name: 'الكل', icon: 'fas fa-utensils'},
      {name: 'الوجبات الرئيسية', icon: 'fas fa-drumstick-bite'},
      {name: 'البيتزا', icon: 'fas fa-pizza-slice'},
      {name: 'المعكرونة', icon: 'fas fa-bacon'},
      {name: 'المقبلات', icon: 'fas fa-leaf'},
      {name: 'المشروبات', icon: 'fas fa-glass-martini-alt'},
      {name: 'الحلويات', icon: 'fas fa-ice-cream'},
      {name: 'المأكولات البحرية', icon: 'fas fa-fish'},
      {name: 'سندويشات', icon: 'fas fa-hamburger'}
    ];

    // الحالة
    let currentCategory = 'الكل';
    let searchQuery = '';
    let cart = [];
    let wishlist = [];
    let currentSlide = 0;
    let slideInterval;
    let countdownInterval;
    let countdownValue = 20;
    let recentSearches = JSON.parse(localStorage.getItem('recentSearches') || '[]');
    let sortBy = 'default';
    let filterBy = 'all';

    // عناصر DOM
    const categoriesEl = document.getElementById('categories');
    const productsEl = document.getElementById('products');
    const searchInput = document.getElementById('searchInput');
    const searchSuggestions = document.getElementById('searchSuggestions');
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notificationText');
    const cartIcon = document.getElementById('cartIcon');
    const cartCount = document.getElementById('cartCount');
    const wishlistIcon = document.getElementById('wishlistIcon');
    const wishlistCount = document.getElementById('wishlistCount');
    const cartSidebar = document.getElementById('cartSidebar');
    const closeCart = document.getElementById('closeCart');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const wishlistSidebar = document.getElementById('wishlistSidebar');
    const closeWishlist = document.getElementById('closeWishlist');
    const wishlistItems = document.getElementById('wishlistItems');
    const moveAllToCartBtn = document.getElementById('moveAllToCartBtn');
    const checkoutModal = document.getElementById('checkoutModal');
    const cancelOrderBtn = document.getElementById('cancelOrderBtn');
    const orderForm = document.getElementById('orderForm');
    const confirmationOverlay = document.getElementById('confirmationOverlay');
    const countdown = document.getElementById('countdown');
    const cancelOrderFinalBtn = document.getElementById('cancelOrderFinalBtn');
    const privacyModal = document.getElementById('privacyModal');
    const closePrivacy = document.getElementById('closePrivacy');
    const privacyLink = document.getElementById('privacyLink');
    const overlay = document.getElementById('overlay');
    const slider = document.getElementById('slider');
    const sliderDots = document.getElementById('sliderDots');
    const sliderContainer = document.getElementById('sliderContainer');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const backToTop = document.getElementById('backToTop');
    const progressBar = document.getElementById('progressBar');
    const mainHeader = document.getElementById('mainHeader');
    const sortSelect = document.getElementById('sortSelect');
    const filterSelect = document.getElementById('filterSelect');

    // حفظ واسترجاع السلة والمفضلة من localStorage
    function saveCart(){ localStorage.setItem('cart', JSON.stringify(cart)); }
    function loadCart(){ cart = JSON.parse(localStorage.getItem('cart') || '[]'); updateCart(); }
    
    function saveWishlist(){ localStorage.setItem('wishlist', JSON.stringify(wishlist)); }
    function loadWishlist(){ wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]'); updateWishlist(); }

    // تهيئة السلايدر
    function initSlider() {
      // إنشاء النقاط
      const slidesCount = slider.children.length;
      for (let i = 0; i < slidesCount; i++) {
        const dot = document.createElement('div');
        dot.className = `dot ${i === 0 ? 'active' : ''}`;
        dot.addEventListener('click', () => { goToSlide(i); });
        sliderDots.appendChild(dot);
      }

      startSlider();

      // Drag support
      let isDragging = false;
      let startPos = 0;
      let currentTranslate = 0;
      let prevTranslate = 0;

      sliderContainer.addEventListener('touchstart', touchStart, {passive: true});
      sliderContainer.addEventListener('touchmove', touchMove, {passive: true});
      sliderContainer.addEventListener('touchend', touchEnd);
      
      sliderContainer.addEventListener('mousedown', touchStart);
      window.addEventListener('mousemove', touchMove);
      window.addEventListener('mouseup', touchEnd);

      function touchStart(event) {
        if (event.type === 'touchstart') {
          startPos = event.touches[0].clientX;
        } else {
          startPos = event.clientX;
          event.preventDefault();
        }
        
        isDragging = true;
        slider.style.transition = 'none';
        prevTranslate = -currentSlide * sliderContainer.offsetWidth;
        stopSlider();
      }

      function touchMove(event) {
        if (!isDragging) return;
        
        let currentPos;
        if (event.type === 'touchmove') {
          currentPos = event.touches[0].clientX;
        } else {
          currentPos = event.clientX;
        }
        
        const diff = currentPos - startPos;
        currentTranslate = prevTranslate + diff;
        slider.style.transform = `translateX(${currentTranslate}px)`;
      }

      function touchEnd() {
        if (!isDragging) return;
        isDragging = false;
        
        const movedBy = currentTranslate - prevTranslate;
        const width = sliderContainer.offsetWidth;
        
        if (movedBy < -width / 4) {
          goToSlide(currentSlide + 1);
        } else if (movedBy > width / 4) {
          goToSlide(currentSlide - 1);
        } else {
          goToSlide(currentSlide);
        }
        
        startSlider();
      }

      // arrows
      prevBtn.addEventListener('click', () => { goToSlide(Math.max(0, currentSlide - 1)); restartSlider(); });
      nextBtn.addEventListener('click', () => { goToSlide(Math.min(slider.children.length - 1, currentSlide + 1)); restartSlider(); });

      // resize
      window.addEventListener('resize', () => { goToSlide(currentSlide); });
    }

    function startSlider() {
      slideInterval = setInterval(() => { nextSlide(); }, 5000);
    }
    function stopSlider(){ clearInterval(slideInterval); }
    function restartSlider(){ stopSlider(); startSlider(); }
    function nextSlide(){ goToSlide((currentSlide + 1) % slider.children.length); }

    function goToSlide(n){
      const width = sliderContainer.clientWidth;
      currentSlide = clamp(n, 0, slider.children.length - 1);
      slider.style.transition = 'transform 0.6s cubic-bezier(.22,.8,.22,1)';
      slider.style.transform = `translateX(-${currentSlide * width}px)`;

      // update dots
      document.querySelectorAll('.dot').forEach((dot, i) => dot.classList.toggle('active', i === currentSlide));

      // active class for slides for subtle scale effect
      Array.from(slider.children).forEach((s, i) => s.classList.toggle('active', i === currentSlide));
    }

    function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

    // render categories
    function renderCategories(){
      categoriesEl.innerHTML = '';
      categories.forEach(cat=>{
        const d = document.createElement('div');
        d.className = `cat ${currentCategory === cat.name ? 'active' : ''}`;
        d.innerHTML = `\n          <i class="${cat.icon} cat-icon"></i>\n          <small>${cat.name}</small>\n        `;
        d.addEventListener('click', () => { 
          currentCategory = cat.name; 
          renderCategories(); 
          renderProducts(); 
          // Scroll to products section
          document.getElementById('productsSection').scrollIntoView({ behavior: 'smooth' });
        });
        categoriesEl.appendChild(d);
      });
    }

    // render products
    function renderProducts(){
      productsEl.innerHTML='';
      let filteredProducts = currentCategory === 'الكل' ? productsData : productsData.filter(p => p.category === currentCategory);
      
      // Apply search filter
      if (searchQuery) {
        filteredProducts = filteredProducts.filter(p => 
          p.name.toLowerCase().includes(searchQuery.toLowerCase()) || 
          (p.description && p.description.toLowerCase().includes(searchQuery.toLowerCase()))
        );
      }
      
      // Apply additional filters
      if (filterBy === 'discount') {
        filteredProducts = filteredProducts.filter(p => p.oldPrice);
      } else if (filterBy === 'new') {
        filteredProducts = filteredProducts.filter(p => p.badge === 'جديد');
      } else if (filterBy === 'bestseller') {
        filteredProducts = filteredProducts.filter(p => p.sales > 300);
      }
      
      // Apply sorting
      if (sortBy === 'price-asc') {
        filteredProducts.sort((a, b) => a.price - b.price);
      } else if (sortBy === 'price-desc') {
        filteredProducts.sort((a, b) => b.price - a.price);
      } else if (sortBy === 'name') {
        filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
      } else if (sortBy === 'popular') {
        filteredProducts.sort((a, b) => b.sales - a.sales);
      }
      
      if (filteredProducts.length === 0) {
        productsEl.innerHTML = `\n          <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--gray)">\n            <i class="fas fa-search" style="font-size: 48px; margin-bottom: 16px;"></i>\n            <h3>لا توجد منتجات تطابق البحث</h3>\n            <p>جرب البحث بكلمات أخرى أو استعرض جميع الأقسام</p>\n          </div>\n        `;
        return;
      }
      
      filteredProducts.forEach((p, index)=>{
        const card = document.createElement('div');
        card.className='card fade-in';
        card.style.animationDelay = `${index * 0.05}s`;
        
        let badgeHTML = '';
        if (p.badge) { badgeHTML = `<div class="badge">${p.badge}</div>`; }
        
        let oldPriceHTML = '';
        if (p.oldPrice) { oldPriceHTML = `<div class="old-price">${p.oldPrice.toFixed(2)} ${currency}</div>`; }
        
        // Generate star ratings
        let starsHTML = '';
        const fullStars = Math.floor(p.rating);
        const hasHalfStar = p.rating % 1 >= 0.5;
        
        for (let i = 1; i <= 5; i++) {
          if (i <= fullStars) {
            starsHTML += '<i class="fas fa-star"></i>';
          } else if (i === fullStars + 1 && hasHalfStar) {
            starsHTML += '<i class="fas fa-star-half-alt"></i>';
          } else {
            starsHTML += '<i class="far fa-star"></i>';
          }
        }
        
        const isInWishlist = wishlist.includes(p.id);
        
        card.innerHTML = `\n          ${badgeHTML}\n          <button class="wishlist-btn ${isInWishlist ? 'active' : ''}" onclick="toggleWishlist(${p.id})">\n            <i class="${isInWishlist ? 'fas' : 'far'} fa-heart"></i>\n          </button>\n          <div class='img-wrap'>\n            <img src='${p.image}' alt='${p.name}' onerror="handleImageError(this)">\n          </div>\n          <div class='title'>${p.name}</div>\n          <div class="rating">\n            ${starsHTML}\n            <span class="rating-count">(${p.reviews})</span>\n          </div>\n          <div class='price-container'>\n            <div class='price'>${p.price.toFixed(2)} ${currency}</div>\n            ${oldPriceHTML}\n          </div>\n          <div class="card-buttons">\n            <button class='card-btn' onclick='addToCart(${p.id})'>\n              <i class="fas fa-cart-plus"></i> أضف إلى السلة\n            </button>\n          </div>\n        `;
        productsEl.appendChild(card);
      });
    }

    // تطبيق التصفية
    function applyFilters() {
      filterBy = filterSelect.value;
      renderProducts();
    }

    // تطبيق الترتيب
    function applySorting() {
      sortBy = sortSelect.value;
      renderProducts();
    }

    // إدارة المفضلة
    function toggleWishlist(id) {
      if (wishlist.includes(id)) {
        wishlist = wishlist.filter(item => item !== id);
        showNotification('تم إزالة المنتج من المفضلة');
      } else {
        wishlist.push(id);
        showNotification('تم إضافة المنتج إلى المفضلة');
      }
      updateWishlist();
      saveWishlist();
      renderProducts(); // لإعادة رسم القلوب
    }

    function updateWishlist() {
      wishlistCount.textContent = wishlist.length;
      renderWishlistItems();
    }

    function renderWishlistItems() {
      wishlistItems.innerHTML = '';
      if (wishlist.length === 0) {
        wishlistItems.innerHTML = `\n          <div class="wishlist-empty">\n            <i class="fas fa-heart"></i>\n            <p>قائمة المفضلة فارغة</p>\n          </div>\n        `;
        moveAllToCartBtn.style.display = 'none';
        return;
      }
      
      moveAllToCartBtn.style.display = 'block';
      
      wishlist.forEach(id => {
        const product = productsData.find(p => p.id === id);
        if (!product) return;
        
        const wishlistItem = document.createElement('div');
        wishlistItem.className = 'wishlist-item';
        wishlistItem.innerHTML = `\n          <div class="wishlist-item-img">\n            <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/70'">\n          </div>\n          <div class="wishlist-item-details">\n            <div class="wishlist-item-name">${product.name}</div>\n            <div class="wishlist-item-price">${product.price.toFixed(2)} ${currency}</div>\n            <button class="remove-wishlist-item" onclick="toggleWishlist(${product.id})">\n              <i class="fas fa-trash"></i> إزالة\n            </button>\n            <button class="card-btn" style="margin-top: 8px; padding: 8px" onclick="addToCart(${product.id})">\n              <i class="fas fa-cart-plus"></i> أضف إلى السلة\n            </button>\n          </div>\n        `;
        wishlistItems.appendChild(wishlistItem);
      });
    }

    function moveAllToCart() {
      wishlist.forEach(id => {
        addToCart(id);
      });
      wishlist = [];
      updateWishlist();
      saveWishlist();
      showNotification('تم نقل جميع المنتجات إلى السلة');
    }

    function openWishlist() {
      wishlistSidebar.classList.add('open');
      overlay.classList.add('open');
    }

    function closeWishlistSidebar() {
      wishlistSidebar.classList.remove('open');
      overlay.classList.remove('open');
    }

    function openPrivacyModal() {
      privacyModal.classList.add('open');
      overlay.classList.add('open');
    }

    function closePrivacyModal() {
      privacyModal.classList.remove('open');
      overlay.classList.remove('open');
    }

    // search suggestions
    function showSearchSuggestions(query){
      const q = query.trim().toLowerCase();
      searchSuggestions.innerHTML = '';
      let items = [];
      if (!q) {
        // show recent searches
        items = recentSearches.slice().reverse();
        if (items.length === 0) {
          searchSuggestions.innerHTML = '<div class="suggestion-item">لا توجد عمليات بحث سابقة</div>';
          searchSuggestions.classList.add('show');
          return;
        }
        items.forEach(name => {
          const product = productsData.find(p => p.name === name) || {};
          const el = document.createElement('div');
          el.className = 'suggestion-item';
          el.innerHTML = `<div class="suggestion-thumb"><img src="${product.image || 'https://via.placeholder.com/40'}" style="width:100%;height:100%;object-fit:cover"/></div><div class="suggestion-meta"><div class="suggestion-name">${name}</div><div class="suggestion-price">آخر بحث</div></div>`;
          el.addEventListener('click', () => { searchInput.value = name; searchQuery = name; saveRecentSearch(name); renderProducts(); hideSuggestions(); });
          searchSuggestions.appendChild(el);
        });
      } else {
        const matches = productsData.filter(p => 
          p.name.toLowerCase().includes(q) || 
          (p.description && p.description.toLowerCase().includes(q))
        );
        if (matches.length === 0) {
          searchSuggestions.innerHTML = '<div class="suggestion-item">لا توجد نتائج</div>';
          searchSuggestions.classList.add('show');
          return;
        }
        matches.slice(0, 8).forEach(p => {
          const el = document.createElement('div');
          el.className = 'suggestion-item';
          el.innerHTML = `<div class="suggestion-thumb"><img src="${p.image}" style="width:100%;height:100%;object-fit:cover"/></div><div class="suggestion-meta"><div class="suggestion-name">${p.name}</div><div class="suggestion-price">${p.price.toFixed(2)} ${currency}</div></div>`;
          el.addEventListener('click', () => { searchInput.value = p.name; searchQuery = p.name; saveRecentSearch(p.name); renderProducts(); hideSuggestions(); });
          searchSuggestions.appendChild(el);
        });
      }
      searchSuggestions.classList.add('show');
    }
    function hideSuggestions(){ searchSuggestions.classList.remove('show'); }
    function saveRecentSearch(name){
      recentSearches = recentSearches.filter(v => v !== name);
      recentSearches.push(name);
      while(recentSearches.length > 12) recentSearches.shift();
      localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
    }

    // إدارة السلة
    function addToCart(id) {
      const product = productsData.find(x => x.id === id);
      if (!product) return;
      const existingItem = cart.find(item => item.id === id);
      if (existingItem) { existingItem.quantity += 1; } else { cart.push({ id: product.id, name: product.name, price: product.price, image: product.image, quantity: 1 }); }
      updateCart();
      saveCart();
      showNotification('تمت إضافة المنتج إلى السلة');
    }

    function removeFromCart(id) { cart = cart.filter(item => item.id !== id); updateCart(); saveCart(); }
    function updateQuantity(id, quantity) { const item = cart.find(item => item.id === id); if (item) { item.quantity = quantity; if (item.quantity <= 0) { removeFromCart(id); } else { updateCart(); saveCart(); } } }

    function updateCart() {
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      cartCount.textContent = totalItems;
      if (cart.length === 0) {
        cartItems.innerHTML = `\n          <div class=\"empty-cart\">\n            <i class=\"fas fa-shopping-cart\"></i>\n            <p>سلة التسوق فارغة</p>\n          </div>\n        `;
        cartTotal.textContent = `0.00 ${currency}`;
        checkoutBtn.disabled = true;
        checkoutBtn.style.opacity = 0.6;
        return;
      }
      checkoutBtn.disabled = false; checkoutBtn.style.opacity = 1;
      cartItems.innerHTML = '';
      let total = 0;
      cart.forEach(item => {
        const itemTotal = item.price * item.quantity; total += itemTotal;
        const cartItem = document.createElement('div'); cartItem.className = 'cart-item';
        cartItem.innerHTML = `\n          <div class=\"cart-item-img\">\n            <img src=\"${item.image}\" alt=\"${item.name}\" onerror=\"this.src='https://via.placeholder.com/70'\">\n          </div>\n          <div class=\"cart-item-details\">\n            <div class=\"cart-item-name\">${item.name}</div>\n            <div class=\"cart-item-price\">${item.price.toFixed(2)} ${currency}</div>\n            <div class=\"cart-item-quantity\">\n              <button class=\"quantity-btn\" onclick=\"updateQuantity(${item.id}, ${item.quantity - 1})\">-</button>\n              <input type=\"number\" class=\"quantity-input\" value=\"${item.quantity}\" min=\"1\" onchange=\"updateQuantity(${item.id}, parseInt(this.value))\">\n              <button class=\"quantity-btn\" onclick=\"updateQuantity(${item.id}, ${item.quantity + 1})\">+</button>\n            </div>\n            <button class=\"remove-item\" onclick=\"removeFromCart(${item.id})\">\n              <i class=\"fas fa-trash"></i> إزالة\n            </button>\n          </div>\n        `;
        cartItems.appendChild(cartItem);
      });
      cartTotal.textContent = `${total.toFixed(2)} ${currency}`;
    }

    function openCart() { cartSidebar.classList.add('open'); overlay.classList.add('open'); }
    function closeCartSidebar() { cartSidebar.classList.remove('open'); overlay.classList.remove('open'); }
    function openCheckout() {
      if (cart.length === 0) { showNotification('السلة فارغة، أضف منتجات أولاً'); return; }
      closeCartSidebar(); checkoutModal.classList.add('open'); overlay.classList.add('open');
    }
    function closeCheckout() { checkoutModal.classList.remove('open'); overlay.classList.remove('open'); }

    function submitOrder(event) {
      event.preventDefault();
      const formData = new FormData(orderForm);
      const orderData = { name: formData.get('name'), phone: formData.get('phone'), governorate: formData.get('governorate'), address: formData.get('address'), street: formData.get('street'), notes: formData.get('notes'), items: cart, total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) };

      // ضع بيانات الطلب داخل لوحة التأكيد قبل البدء بالعد
      document.getElementById('confName').textContent = orderData.name || '-';
      document.getElementById('confPhone').textContent = orderData.phone || '-';
      document.getElementById('confGovernorate').textContent = orderData.governorate || '-';
      document.getElementById('confAddress').textContent = orderData.address || '-';

      const confItems = document.getElementById('confItems');
      if (!orderData.items || orderData.items.length === 0) {
        confItems.innerHTML = '<div style="color: var(--gray);">لا توجد منتجات в الطلب.</div>';
      } else {
        confItems.innerHTML = orderData.items.map(it => `\n          <div class=\"conf-item\">\n            <div style=\"max-width:70%\">${it.name} <small style=\"display:block;color:var(--gray)\">x${it.quantity}</small></div>\n            <div>${(it.price * it.quantity).toFixed(2)} ${currency}</div>\n          </div>\n        `).join('');
      }

      document.getElementById('confTotal').textContent = `${orderData.total.toFixed(2)} ${currency}`;

      closeCheckout(); confirmationOverlay.classList.add('open'); overlay.classList.add('open');
      countdownValue = 20; countdown.textContent = countdownValue;

      // حفظ orderData داخل متغير محلي في نفس السياق ليستخدمه confirmOrder لاحقًا
      if (countdownInterval) clearInterval(countdownInterval);
      countdownInterval = setInterval(() => { countdownValue--; countdown.textContent = countdownValue; if (countdownValue <= 0) { clearInterval(countdownInterval); confirmOrder(orderData); } }, 1000);
    }

    function cancelOrder() { clearInterval(countdownInterval); confirmationOverlay.classList.remove('open'); overlay.classList.remove('open'); }

    function confirmOrder(orderData) {
      sendOrderToDiscord(orderData);
      showNotification('تم تأكيد طلبك بنجاح!');
      cart = []; updateCart(); saveCart();
      setTimeout(() => { confirmationOverlay.classList.remove('open'); overlay.classList.remove('open'); }, 1200);
    }

    function sendOrderToDiscord(orderData) {
      const itemsList = orderData.items.map(item => `- ${item.name} (${item.quantity} × ${item.price.toFixed(2)} ${currency})`).join('\n');
      const message = { content: `**طلب جديد من مطعمي**`, embeds: [{ title: "تفاصيل الطلب", color: 0xe74c3c, fields: [ { name: "العميل", value: `${orderData.name}\n${orderData.phone}`, inline: true }, { name: "العنوان", value: `${orderData.governorate} - ${orderData.address}\n${orderData.street || 'لا يوجد'}`, inline: true }, { name: "المجموع", value: `${orderData.total.toFixed(2)} ${currency}` }, { name: "ملاحظات", value: orderData.notes || "لا توجد ملاحظات" }, { name: "المنتجات", value: itemsList } ], timestamp: new Date().toISOString() }] };
      fetch(discordWebhookURL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(message) }).catch(error => { console.error('Error sending to Discord:', error); });
    }

    function handleImageError(img, small = false) {
      if (small) { img.parentElement.innerHTML = '<i class="fas fa-image" style="color: #ccc;"></i>'; } else { img.style.opacity = '0.35'; img.style.filter = 'grayscale(40%)'; img.parentElement.innerHTML = '<div style="text-align:center;color:var(--muted);font-size:13px"><i class="fas fa-image" style="font-size: 32px; margin-bottom: 8px;"></i><div>لا توجد صورة</div></div>'; }
    }

    function showNotification(text) { notificationText.textContent = text; notification.classList.add('show'); setTimeout(() => { notification.classList.remove('show'); }, 2500); }

    function openWhatsApp(message){ showNotification('جاري فتح واتساب'); const encoded = encodeURIComponent(message); const url = `https://wa.me/${restaurantPhone}?text=${encoded}`; setTimeout(() => { window.open(url, '_blank'); }, 800); }

    function scrollToProducts() { document.getElementById('productsSection').scrollIntoView({ behavior: 'smooth' }); }
    
    function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

    // البحث
    searchInput.addEventListener('input', (e) => { searchQuery = e.target.value; renderProducts(); showSearchSuggestions(searchQuery); });
    searchInput.addEventListener('focus', () => { showSearchSuggestions(searchInput.value || ''); });
    searchInput.addEventListener('blur', () => { setTimeout(hideSuggestions, 150); });

    // event listeners
    cartIcon.addEventListener('click', openCart);
    wishlistIcon.addEventListener('click', openWishlist);
    closeCart.addEventListener('click', closeCartSidebar);
    closeWishlist.addEventListener('click', closeWishlistSidebar);
    moveAllToCartBtn.addEventListener('click', moveAllToCart);
    checkoutBtn.addEventListener('click', openCheckout);
    cancelOrderBtn.addEventListener('click', closeCheckout);
    orderForm.addEventListener('submit', submitOrder);
    cancelOrderFinalBtn.addEventListener('click', cancelOrder);
    privacyLink.addEventListener('click', (e) => { e.preventDefault(); openPrivacyModal(); });
    closePrivacy.addEventListener('click', closePrivacyModal);
    overlay.addEventListener('click', () => { closeCartSidebar(); closeWishlistSidebar(); closeCheckout(); closePrivacyModal(); });
    backToTop.addEventListener('click', scrollToTop);

    // شريط التقدم أثناء التمرير
    window.addEventListener('scroll', () => {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      progressBar.style.width = scrolled + '%';
      
      // إظهار/إخفاء زر العودة للأعلى
      if (winScroll > 300) {
        backToTop.classList.add('show');
        mainHeader.classList.add('scrolled');
      } else {
        backToTop.classList.remove('show');
        mainHeader.classList.remove('scrolled');
      }
    });

    // init
    renderCategories(); 
    renderProducts(); 
    initSlider(); 
    loadCart();
    loadWishlist();
  </script>


<!-- Assistant slider JS (simple, robust) -->
<script>
(function(){
  const sliderContainer = document.getElementById('sliderContainer');
  const slider = document.getElementById('slider');
  if (!sliderContainer || !slider) return;
  const slides = Array.from(slider.children);
  // Ensure slide images load; set fallback on error
  const FALLBACK = 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80';
  slides.forEach(sl => {
    const img = sl.querySelector('.slide-img');
    if (img) {
      img.onerror = function(){ this.src = FALLBACK; this.style.display='block'; };
      // If image not yet loaded and has zero naturalWidth, set a small timeout to set fallback
      img.addEventListener('load', function(){ if(!this.naturalWidth){ this.src = FALLBACK; } });
    } else {
      // set background if no img
      sl.style.background = 'url(' + FALLBACK + ') center/cover no-repeat';
    }
  });
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const dotsContainer = document.getElementById('sliderDots');
  let current = 0;
  const INTERVAL = 5000;
  let timer = null;

  // build dots
  dotsContainer.innerHTML = '';
  slides.forEach((s, i) => {
    const b = document.createElement('button');
    b.className = 'dot';
    b.setAttribute('aria-label', 'انتقال للشريحة ' + (i+1));
    b.addEventListener('click', () => { goTo(i); restart(); });
    dotsContainer.appendChild(b);
  });

  function updateDots(){
    const dots = Array.from(dotsContainer.children);
    dots.forEach((d, idx) => d.classList.toggle('active', idx === current));
  }

  function goTo(index){
    current = ((index % slides.length) + slides.length) % slides.length;
    // translate by percentage (works regardless of container width)
    slider.style.transform = 'translateX(-' + (current * 100) + '%)';
    updateDots();
  }

  function next(){ goTo(current + 1); }
  function prev(){ goTo(current - 1); }

  if (nextBtn) nextBtn.addEventListener('click', () => { next(); restart(); });
  if (prevBtn) prevBtn.addEventListener('click', () => { prev(); restart(); });

  function start(){ stop(); timer = setInterval(next, INTERVAL); }
  function stop(){ if (timer) clearInterval(timer); timer = null; }
  function restart(){ stop(); start(); }

  // responsive: ensure slides are same height as container (already set via CSS height:100%)
  window.addEventListener('resize', () => { goTo(current); });

  // init
  goTo(0);
  start();

  // optional: pause on hover
  sliderContainer.addEventListener('mouseenter', stop);
  sliderContainer.addEventListener('mouseleave', start);
})();

</script>
<!-- end assistant slider JS -->

</body>
</html>